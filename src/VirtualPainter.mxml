<?xml version="1.0" encoding="utf-8"?>
<mx:Application layout="absolute" minWidth="955" minHeight="600"
	xmlns:swiz="http://swiz.swizframework.org"
	xmlns:mx="http://www.adobe.com/2006/mxml"> 
	
	<swiz:SwizConfig
		strict="true"
		beanLoaders="{ [ApplicationConfig] }"
		mediateBubbledEvents="true"
		/>
	
	<mx:Style>
		.myColorPicker { 
			 overSkin:Embed(skinClass="MyColorPicker");  
			 upSkin:Embed(skinClass="MyColorPicker");  
			 disabledSkin:Embed(skinClass="MyColorPicker");  
			 downSkin:Embed(skinClass="MyColorPicker");  
		}
	</mx:Style>

	
	<!--<mx:ColorPicker id="cp" styleName="myColorPicker"/>
	-->
	<mx:Script>
		<![CDATA[
			import com.stdva.malibu.PainterWindow;
			import com.stdva.malibu.vpaint.BDDrawTool;
			import com.stdva.malibu.vpaint.DrawingParams;
			import com.stdva.malibu.vpaint.GUIListener;
			import com.stdva.malibu.vpaint.MaskColorPicker;
			
			import mx.controls.ColorPicker;
			import mx.events.ColorPickerEvent;
			import mx.events.FlexEvent;
			
			private var _painterWindow : PainterWindow;
			private var _addedToStage : Boolean = false;
			
			[Autiwire]
			public var guiListener : GUIListener;
			
			[Autowire]
			public var drawingParams : DrawingParams;
			
			[Autowire]
			public function set painterWindow( window : PainterWindow ) : void {
				
				_painterWindow = window;
				
				trace( window.width );
				trace( window.height );
				
				rawChildren.addChild( _painterWindow );
				
				var colorPicker : ColorPicker = new MaskColorPicker();
				colorPicker.x = _painterWindow.picker.x;
				colorPicker.y = _painterWindow.picker.y+ _painterWindow.picker.height;
				_painterWindow.picker.visible = false;
				
				colorPicker.width=0;
				colorPicker.height=0;
				colorPicker.styleName="myColorPicker";
				rawChildren.addChild(colorPicker);
				drawingParams.color = colorPicker.selectedColor;
				colorPicker.addEventListener(ColorPickerEvent.CHANGE,function (e:*) : void 
				{
					drawingParams.color = colorPicker.selectedColor;
				});
				
				_painterWindow.backActive.visible = false;
				_painterWindow.forwardActive.visible = false;
				
			}

		]]>
	</mx:Script>
	
</mx:Application>
